{
  "version": "3.8",
  "services": {
    "web": {
      "image": "nginx:latest",
      "ports": ["80:80", "443:443"],
      "environment": [
        "NGINX_HOST=localhost",
        "NGINX_PORT=80"
      ],
      "volumes": [
        "./html:/usr/share/nginx/html:ro",
        "./nginx.conf:/etc/nginx/nginx.conf:ro"
      ],
      "depends_on": ["app", "db"]
    },
    "app": {
      "image": "python:3.9-slim",
      "command": ["python", "app.py"],
      "environment": {
        "DATABASE_URL": "postgresql://user:pass@db:5432/app",
        "REDIS_URL": "redis://cache:6379",
        "DEBUG": "false"
      },
      "volumes": ["./app:/code"],
      "depends_on": ["db", "cache"]
    },
    "db": {
      "image": "postgres:13-alpine",
      "environment": [
        "POSTGRES_DB=app",
        "POSTGRES_USER=user",
        "POSTGRES_PASSWORD=secret123"
      ],
      "volumes": ["pgdata:/var/lib/postgresql/data"]
    },
    "cache": {
      "image": "redis:6-alpine",
      "ports": ["6379"]
    }
  },
  "volumes": {
    "pgdata": {}
  }
}